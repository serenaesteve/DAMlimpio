Consultas de resumen en una tienda en línea
En un mundo digital tan rápido, conocer información relevante y estructurada sobre las ventas es crucial para mantener un negocio exitoso. Hoy te presentamos un ejercicio que te permitirá practicar cómo realizar consultas de resumen utilizando datos de una tienda en línea.

Contexto
Imagine que eres el dueño de una pequeña tienda en línea especializada en juguetes y libros. Para mejorar la gestión del negocio, necesitas obtener información importante sobre las ventas realizadas. A través de consultas de resumen, podrás determinar cuáles son los pedidos más caros, cuántos pedidos se han realizado en total, el promedio de lo que gasta cada cliente y el total de ingresos.

Enunciado paso a paso
Encuentra el pedido más caro:

Utiliza la vista vista_pedidos para identificar el pedido con el monto total más alto.
Resumen de suma:

Consulta la vista vista_pedidos para obtener un resumen completo de todas las ventas realizadas.
Cuantos pedidos se han realizado:

Determina cuántos pedidos en total se han realizado en la tienda utilizando la vista vista_pedidos.
Promedio de lo que gasta la gente en tu tienda:

Calcula el promedio del monto total de las ventas realizadas.
Total de ingresos:

Suma todos los montos totales de las ventas para obtener el ingreso total de la tienda.
Restricciones
Solo puedes usar las consultas SQL proporcionadas en los archivos de ejercicios.
No utilices funciones o métodos que no estén permitidos en la lista blanca.
Criterios de evaluación
Introducción y contextualización (25%): Explica por qué es importante realizar consultas de resumen en una tienda en línea y cómo estas te ayudarán a tomar decisiones informadas.
Desarrollo técnico correcto y preciso (25%): Asegúrate de que tus consultas SQL sean correctas y sigan los criterios de la lista blanca.
Aplicación práctica con ejemplo claro (25%): Proporciona ejemplos claros de cómo cada consulta te permitirá obtener información relevante sobre las ventas.
Cierre/Conclusión enlazando con la unidad (25%): Concluye tu actividad explicando cómo estas consultas pueden ser útiles para mejorar la gestión del negocio y cómo puedes utilizarlas regularmente.
Recuerda que los hobbies de juegos de mesa, la naturaleza y los libros pueden ayudarte a mantener una mente activa y creativa mientras practicas estos conceptos importantes en bases de datos. ¡Buena suerte!



Respuesta:



Tener una tienda en línea significa que todos los días llegan muchos pedidos y datos. Si solo miro esos datos sin orden, me puedo liar y no saber qué está pasando.
Las consultas de resumen son como un resumen rápido que me dice cosas importantes, como:
-Cuántos pedidos he hecho.
-Cuál fue el pedido mas caro.
-Cuánto gastan en promedio los clientes.
-Cuánto dinero he ganado.
​
Con esta información, puedo decidir mejor qué productos vender más, cuándo hacer ofertas o cómo mejorar la tienda. Así no tomo decisiones sin saber, sino con datos claros que me ayudan a crecer.
​
​
​
1. En mi base de datos "tienda_juguetes" creo la tabla de "Pedidos","clientes","productos" y "detalle_pedido" creadas asi:
```
CREATE TABLE pedidos (
    id_pedido INT AUTO_INCREMENT PRIMARY KEY,
    id_cliente INT NOT NULL,
    fecha_pedido DATE NOT NULL,
    FOREIGN KEY (id_cliente) REFERENCES clientes(id_cliente)
);
​
CREATE TABLE clientes (
    id_cliente INT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(100) NOT NULL,
    correo VARCHAR(100)
);
​
CREATE TABLE productos (
    id_producto INT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(100) NOT NULL,
    precio DECIMAL(10,2) NOT NULL
);
​
CREATE TABLE detalle_pedido (
    id_detalle INT AUTO_INCREMENT PRIMARY KEY,
    id_pedido INT NOT NULL,
    id_producto INT NOT NULL,
    cantidad INT NOT NULL,
    precio_unitario DECIMAL(10,2) NOT NULL,
    FOREIGN KEY (id_pedido) REFERENCES pedidos(id_pedido),
    FOREIGN KEY (id_producto) REFERENCES productos(id_producto)
);
​
```
​
2. Ahora inserto datos a las tablas:
```
INSERT INTO clientes (nombre, correo) VALUES
('Serena Sania', 'serena@mail.com'),
('Hector López', 'hector@mail.com'),
('Thais Esteve', 'thais@mail.com');
​
INSERT INTO productos (nombre, precio) VALUES
('Libro: Aventuras mágicas', 12.99),
('Lego Star Wars', 49.99),
('Rompecabezas 500 piezas', 15.50),
('Pelota sensorial', 7.25);
​
INSERT INTO pedidos (id_cliente, fecha_pedido) VALUES
(1, '2025-10-01'),
(2, '2025-10-03'),
(1, '2025-10-04');
​
INSERT INTO detalle_pedido (id_pedido, id_producto, cantidad, precio_unitario) VALUES
(1, 1, 1, 12.99),
(1, 3, 1, 15.50);
​
​
INSERT INTO detalle_pedido (id_pedido, id_producto, cantidad, precio_unitario) VALUES
(2, 2, 1, 49.99),
(2, 4, 2, 7.25);
​
​
INSERT INTO detalle_pedido (id_pedido, id_producto, cantidad, precio_unitario) VALUES
(3, 1, 2, 12.99);
```
​
3. Creo la vista_pedidos:
```
CREATE VIEW vista_pedidos AS
SELECT 
    p.id_pedido,
    p.id_cliente,
    c.nombre AS cliente,
    p.fecha_pedido,
    SUM(dp.cantidad * dp.precio_unitario) AS monto_total
FROM pedidos p
JOIN clientes c ON p.id_cliente = c.id_cliente
JOIN detalle_pedido dp ON p.id_pedido = dp.id_pedido
GROUP BY p.id_pedido, p.id_cliente, c.nombre, p.fecha_pedido;
```
​
4. Pedido mas caro.
```
SELECT * 
FROM vista_pedidos
ORDER BY monto_total DESC
LIMIT 1;
```
​
En este caso es Hector con 64,49€
​
5. Resumen de las ventas:
```
SELECT 
    COUNT(*) AS total_pedidos,
    SUM(monto_total) AS ingresos_totales,
    AVG(monto_total) AS promedio_por_pedido,
    MAX(monto_total) AS pedido_mas_caro
FROM vista_pedidos;
```
​
total_pedidos: 3
ingresos_totales: 118.96€
promedio_por_pedido: 39.653333
pedido_mas_caro: 64,49€
​
6. Cusntos pedidos se han realizado?
```
SELECT COUNT(*) AS total_pedidos
FROM vista_pedidos;
```
​
3
​
7. Promedio de gasto por pedido:
```
SELECT AVG(monto_total) AS promedio_por_pedido
FROM vista_pedidos;
```
​
39.653333
​
8. Total de ingresos en la tienda:
```
SELECT SUM(monto_total) AS ingresos_totales
FROM vista_pedidos;
```
​
118.96€
​
​
​
Estas consultas de resumen son muy útiles para mejorar la gestión de la tienda porque me enseñan la información más importante de manera clara y rápida. Gracias a ellas, puedo saber cuáles son los pedidos más grandes, cuánto dinero entra a la tienda y cómo se comportan los clientes.
​
Usando estas consultas regularmente, puedo tomar decisiones más acertadas, como ajustar precios, planear promociones o saber qué productos comprar más. Así, puedo hacer que mi negocio funcione mejor y crezca de forma ordenada y eficiente.
​
Basicamente, hacer estas consultas siempre me ayuda a entender mejor mi tienda y a mantenerla en buen camino.
