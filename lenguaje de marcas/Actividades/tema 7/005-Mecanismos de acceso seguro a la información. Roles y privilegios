Enunciado paso a paso
Contexto: Imagina que eres un programador web que trabaja para una empresa que quiere ofrecer su sitio web en m칰ltiples idiomas para llegar a un p칰blico global. Para lograr esto, necesitas implementar una funci칩n que cambie el idioma del sitio web seg칰n la elecci칩n del usuario.

Desarrolla la funcionalidad:

Crea una p치gina HTML con un men칰 desplegable (<select>) que incluya al menos 5 idiomas (espa침ol, ingl칠s, franc칠s, alem치n y italiano).
Utiliza PHP para manejar la selecci칩n del usuario y cambiar el idioma de la p치gina seg칰n la opci칩n seleccionada.
Aseg칰rate de que la p치gina actualice su contenido en tiempo real cuando el usuario cambia el idioma.
Aplica pr치cticas:

Implementa una funci칩n PHP que reciba el idioma como par치metro y devuelva un array asociativo con los textos traducidos.
Utiliza esta funci칩n para mostrar el t칤tulo de la p치gina, un texto descriptivo y un mensaje en diferentes idiomas.
Restricciones
Solo puedes usar los archivos proporcionados en la carpeta /var/www/html/dam2526/Primero/Lenguajes de marcas y sistemas de gesti칩n de informaci칩n/007-Sistemas de gesti칩n empresarial/005-Mecanismos de acceso seguro a la informaci칩n. Roles y privilegios/101-Ejercicios.
No puedes usar librer칤as externas ni estructuras que no hayan sido vistas en clase.
Criterios de evaluaci칩n
Introducci칩n y contextualizaci칩n (25%): El estudiante debe entender el contexto del problema y c칩mo implementar la funcionalidad.
Desarrollo t칠cnico correcto y preciso (25%): El c칩digo PHP debe ser limpio, bien estructurado y funcione correctamente para cambiar el idioma de la p치gina seg칰n la selecci칩n del usuario.
Aplicaci칩n pr치ctica con ejemplo claro (25%): El estudiante debe aplicar pr치cticas reales utilizando los archivos proporcionados y mostrar c칩mo manejar la selecci칩n del idioma en una p치gina web.
Cierre/Conclusi칩n enlazando con la unidad (25%): El estudiante debe cerrar el ejercicio relacion치ndolo con la unidad de estudio sobre sistemas de gesti칩n empresarial y c칩mo implementar funcionalidades seguras y pr치cticas en proyectos web.



Respuesta:


En este ejercicio realizo una p치gina web que permite cambiar el idioma del contenido. La mision es que la web pueda verse en varios idiomas para adaptarse a distintos usuarios. Para ello utilizo HTML y PHP, y creo un selector de idiomas que permite elegir el idioma de forma facil.

motoridioma.php:
```
<?php
session_start();


$languages = [
    "es" => "Espa침ol 游쀯릖",
    "en" => "English 游섫릖",
    "fr" => "Fran칞ais 游游",
    "de" => "Deutsch 游뾇릖",
    "it" => "Italiano 游쉻릖",
    "pt" => "Portugu칡s 游왫릖",
    "nl" => "Nederlands 游游",
    "sv" => "Svenska 游젏릖",
    "da" => "Dansk 游뾇릖",
    "fi" => "Suomi 游游",
    "no" => "Norsk 游游",
    "pl" => "Polski 游왫릖",
    "cs" => "캛e코tina 游뻟릖",
    "sk" => "Sloven캜ina 游젏릖",
    "hu" => "Magyar 游쇓릖",
    "ro" => "Rom칙n캒 游游",
    "bg" => "햄혥햩햡햟혜햨햦 游游",
    "el" => "풋풭풭풩풯풫풬풟 游섫릖",
    "hr" => "Hrvatski 游쇓릖",
    "sl" => "Sloven코캜ina 游젏릖",
    "et" => "Eesti 游쀯릖",
    "lv" => "Latvie코u 游쐟릖",
    "lt" => "Lietuvi콥 游쐟릖",
    "mt" => "Malti 游쓇릖",
    "ga" => "Gaeilge 游쉻릖"
];


if (!isset($_SESSION['lang'])) {
    $_SESSION['lang'] = "es";
}


if (isset($_GET['lang']) && array_key_exists($_GET['lang'], $languages)) {
    $_SESSION['lang'] = $_GET['lang'];
}

$currentLang = $_SESSION['lang'];


$lang = [];

$csvPath = __DIR__ . "/idiomas.csv";
$fh = fopen($csvPath, "r");
if ($fh === false) {
    http_response_code(500);
    die("Cannot open translation file: " . htmlspecialchars($csvPath));
}


$headers = fgetcsv($fh);
if ($headers === false) {
    fclose($fh);
    http_response_code(500);
    die("Translation CSV is empty or invalid.");
}


$headers[0] = preg_replace('/^\xEF\xBB\xBF/', '', $headers[0]);

$baseIndex = array_search("es", $headers, true);
$currentIndex = array_search($currentLang, $headers, true);

if ($baseIndex === false) {
    fclose($fh);
    http_response_code(500);
    die('Translation CSV must include an "es" column header.');
}


if ($currentIndex === false) {
    $currentIndex = $baseIndex;
}

while (($row = fgetcsv($fh)) !== false) {
    if (!isset($row[$baseIndex])) {
        continue;
    }

    $key = $row[$baseIndex];

   
    $value = $row[$currentIndex] ?? ($row[$baseIndex] ?? $key);

    $lang[$key] = $value;
}

fclose($fh);


function selectorIdioma(){
    global $languages, $currentLang;

    echo '<select id="idioma">';
    foreach ($languages as $code => $label){
        echo '<option value="'.htmlspecialchars($code).'"';
        if ($code === $currentLang) {
            echo ' selected';
        }
        echo '>'.htmlspecialchars($label).'</option>';
    }
    echo '</select>';
}
```

index.php:
```
<?php include "motoridioma.php"; ?>
<!doctype html>
<html lang="<?= htmlspecialchars($currentLang) ?>">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title><?= htmlspecialchars($lang['Titulo de mi web'] ?? 'Mi web') ?></title>
</head>
<body>

<?php selectorIdioma(); ?>

<h1><?= htmlspecialchars($lang['Titulo de mi web'] ?? 'Titulo de mi web') ?></h1>
<p><?= htmlspecialchars($lang['Texto de mi web'] ?? 'Texto de mi web') ?></p>
<p><?= htmlspecialchars($lang['Este es el texto que va a contener mi web'] ?? 'Este es el texto que va a contener mi web') ?></p>

<script>
document.getElementById("idioma").addEventListener("change", function () {
    const url = new URL(window.location.href);
    url.searchParams.set("lang", this.value);
    window.location.href = url.toString();
});
</script>

</body>
</html>
```

idiomas.csv:
```
es,en,fr,de,it
Titulo de mi web,My website title,Titre de mon site,Titel meiner Webseite,Titolo del mio sito
Texto de mi web,Website text,Texte du site,Webseitentext,Testo del sito
Este es el texto que va a contener mi web,This is the content of my website,Ceci est le contenu de mon site,Dies ist der Inhalt meiner Webseite,Questo 칟 il contenuto del mio sito
```

En este ejercicio creo una p치gina web que puede verse en varios idiomas. En la p치gina hay un men칰 desplegable donde el usuario elige el idioma que quiere usar. Cuando se cambia el idioma, el texto de la web cambia autom치ticamente.

Para hacerlo, uso PHP y sesiones. El idioma que selecciona el usuario se guarda en una sesi칩n para que no se pierda cuando se recarga la p치gina. Tambi칠n compruebo que el idioma elegido sea uno de los permitidos para evitar errores.

Los textos de la web est치n guardados en un archivo CSV. PHP lee este archivo y ense침a los textos en el idioma seleccionado. As칤 no tengo que repetir c칩digo y es m치s f치cil a침adir nuevos idiomas o cambiar los textos.

Con este ejercicio practico c칩mo personalizar una web seg칰n el usuario y c칩mo controlar el acceso a la informaci칩n de forma sencilla y segura, algo importante en los sistemas de gesti칩n empresarial.
